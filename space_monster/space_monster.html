<!doctype html>


<html lang="en">
    <head>

    </head>


    <body>
        <img id="planet" src="images/planet.jpg" alt="Planet" style="display:none">
        <img id="rocket" src="images/rocket.png" alt="Rocket" style="display:none">
        <img id="ufo" src="images/ufo.png" alt="Ufo" style="display:none">
        <img id="bullet" src="images/bullet.png" alt="Bullet" style="display:none">
        <img id="explosion"  src="images/explosion2.png" alt="Explosion" style="display:none">
        <img id="bonus"  src="images/star.jpg" alt="Bonus" style="display:none">



        <canvas id="canvas1" width="800" height="600" style="border:1px solid #000000;"></canvas>





        <script>
        </script>

        <script src="external/jquery_1_11_1.min.js"></script>

        <script type="text/javascript" src="../engine/Util.js"></script>
        <script type="text/javascript" src="../engine/Engine.js"></script>
        <script type="text/javascript" src="../engine/Sprite.js"></script>
        <script type="text/javascript" src="../engine/Animator.js"></script>
        <script type="text/javascript" src="scripts/sprites/BaseSprite.js"></script>
        <script type="text/javascript" src="scripts/sprites/Rocket.js"></script>       
        <script type="text/javascript" src="scripts/sprites/UfoType1.js"></script>
        <script type="text/javascript" src="scripts/sprites/UfoType2.js"></script>
        <script type="text/javascript" src="scripts/sprites/UfoType3.js"></script>
        <script type="text/javascript" src="scripts/sprites/Bullet.js"></script>
        <script type="text/javascript" src="scripts/sprites/Explosion.js"></script>      
        <script type="text/javascript" src="scripts/sprites/Bonus.js"></script>
        <script type="text/javascript" src="scripts/EnemyGenerator.js"></script>
        <script>

            $(window).load(function () {
                var screenWidth = 800;
                var screenHeight = 600;
               
                var engine = new Engine("canvas1").withCollisionDetector();
                
                var rocket = new Rocket(engine,screenWidth, screenHeight).setImage("rocket").setWidthAndHeight(30, 50).setPosition(400, 500);


                var enemyGenerator = new EnemyGenerator(engine,rocket);                

                var points = 0;
                
                engine.registerUpdateHandler(function (context, timeSinceStart, keyEvents) {              
                    enemyGenerator.generateEnemies(timeSinceStart);
                });
                
                var points  = 0;
                engine.registerDestructionHandler(function(sprite){
                    points = points + sprite.getPoints();
                    if (sprite.getPoints() !== 0 && points !== 0) {
                        if (points % 20000 === 0) {
                            new Bonus(engine, screenWidth);
                        }
                    }                    
                });          
                        
                engine.registerOffScreenDetector(function (screenWidth, screenHeight, sprite) {
                    return sprite.getOffScreenDetector()(screenWidth, screenHeight, sprite);
                });
                
                engine.registerOffScreenHandler(function(sprite){
                    return sprite.getOffScreenHandler()(sprite);
                });
 
                engine.start();
            });





        </script>





    </body>
</html>


